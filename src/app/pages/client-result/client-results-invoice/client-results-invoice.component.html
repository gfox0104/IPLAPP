<div class="row mt-2 ml-0 mr-0">
  <div class="col-12">
    <div class="tab-content pt-2" id="myTabContent">
      <div class="module-box">
        <h4 class="module-box-header">Work Order Score</h4>
        <div class="row m-0">
          <div class="col-md-8 col-lg-8 onSmall col-12 pl-3">
            <table class="scorecard-table">
              <tr>
                <th
                  class="col-form-label"
                  *ngFor="let column of scorCardColumns"
                  [width]="column.width"
                >
                  {{ column.title }}
                </th>
              </tr>
              <!-- <tr *ngFor="let item of tempScorecardData">
                  <td class="col-form-label" style="border: 1px solid black;" *ngFor="let column of scorCardColumns">
                    <label *ngIf="column.field === 'Sna_Name'; else radiogroup">{{item[column.field]}}</label>
                    <ng-template #radiogroup>
                      <input type="radio" id="{{ item.Sna_Name + column.field }}" name="{{item.Sna_Name}}"
                        [value]="column.title" [checked]="item[column.field] === 'default'" />
                    </ng-template>
                  </td>
                </tr> -->
              <tr *ngFor="let scorecard of tempScorecardData; let i = index">
                <td>{{ scorecard.Sna_Name }}</td>
                <td>
                  <div
                    class="radio radio-info form-check-inline"
                    style="margin-right: 30px"
                  >
                    <input
                      type="radio"
                      id="redioA"
                      (ngModelChange)="
                        scorecarditem(scorecard.str_Scdc_Status_Id)
                      "
                      id="Prefered-{{ i }}"
                      [(ngModel)]="scorecard.str_Scdc_Status_Id"
                      [ngModelOptions]="{ standalone: true }"
                      value="A"
                      name="radioInline-{{ i }}"
                      [disabled]="disableScoreCard"
                    />
                    <label for="redioA"> A </label>
                  </div>
                </td>
                <td>
                  <div
                    class="radio radio-info form-check-inline"
                    style="margin-right: 30px"
                  >
                    <input
                      type="radio"
                      id="redioB"
                      (ngModelChange)="
                        scorecarditem(scorecard.str_Scdc_Status_Id)
                      "
                      id="Prefered-{{ i }}"
                      [(ngModel)]="scorecard.str_Scdc_Status_Id"
                      [ngModelOptions]="{ standalone: true }"
                      value="B"
                      name="radioInline-{{ i }}"
                      [disabled]="disableScoreCard"
                    />
                    <label for="redioB"> B </label>
                  </div>
                </td>
                <td>
                  <div
                    class="radio radio-info form-check-inline"
                    style="margin-right: 30px"
                  >
                    <input
                      type="radio"
                      id="redioC"
                      (ngModelChange)="
                        scorecarditem(scorecard.str_Scdc_Status_Id)
                      "
                      id="Prefered-{{ i }}"
                      [(ngModel)]="scorecard.str_Scdc_Status_Id"
                      [ngModelOptions]="{ standalone: true }"
                      value="C"
                      name="radioInline-{{ i }}"
                      [disabled]="disableScoreCard"
                    />
                    <label for="redioC"> C </label>
                  </div>
                </td>
                <td>
                  <div
                    class="radio radio-info form-check-inline"
                    style="margin-right: 30px"
                  >
                    <input
                      type="radio"
                      id="redioD"
                      (ngModelChange)="
                        scorecarditem(scorecard.str_Scdc_Status_Id)
                      "
                      id="Prefered-{{ i }}"
                      [(ngModel)]="scorecard.str_Scdc_Status_Id"
                      [ngModelOptions]="{ standalone: true }"
                      value="D"
                      name="radioInline-{{ i }}"
                      [disabled]="disableScoreCard"
                    />
                    <label for="redioD"> D </label>
                  </div>
                </td>

                <!-- <td>
                  <div class="radio radio-info form-check-inline"style="margin-right: 30px;">
                    <input type="radio" id="redioE"
                      (ngModelChange)="scorecarditem(scorecard.str_Scdc_Status_Id)"id="Prefered-{{i}}"
                      [(ngModel)]="scorecard.str_Scdc_Status_Id" [ngModelOptions]="{standalone: true}"
                      value="E" name="radioInline-{{i}}">
                    <label for="redioE"> E </label>
                  </div>
                </td> -->
                <td>
                  <div
                    class="radio radio-info form-check-inline"
                    style="margin-right: 30px"
                  >
                    <input
                      type="radio"
                      id="redioF"
                      (ngModelChange)="
                        scorecarditem(scorecard.str_Scdc_Status_Id)
                      "
                      id="Prefered-{{ i }}"
                      [(ngModel)]="scorecard.str_Scdc_Status_Id"
                      [ngModelOptions]="{ standalone: true }"
                      value="F"
                      name="radioInline-{{ i }}"
                      [disabled]="disableScoreCard"
                    />
                    <label for="redioF"> F </label>
                  </div>
                </td>
              </tr>
              <tr>
                <td colspan="6">
                  <div class="col-4" [hidden]="expences">
                    <button
                      class="btn btn-primary ml-n2"
                      (click)="
                        AddScoreCardDetails(
                          tempScorecardData,
                          scorecardDTOObj.Scd_Comment
                        )
                      "
                    >
                      <i class="fa fa-save"></i> Save
                    </button>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <div class="col-md-4 col-lg-4 col-12 pl-0">
            <div class="comment">
              <div class="row m-0">
                <div class="col-md-12 col-lg-12 col-3">
                  <label>Feedback</label>
                </div>
                <div class="col-md-12 col-lg-12 col-9">
                  <textarea
                    [(ngModel)]="scorecardDTOObj.Scd_Comment"
                    [ngModelOptions]="{ standalone: true }"
                    class="cbox"
                    [disabled]="disableScoreCard"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- pradeep start-->
      <div
        style="box-shadow: 0 0 5px"
        class="m-0 mt-4 contractor row"
        [hidden]="processorh"
      >
        <h4 (click)="hideContractor()" class="col-12 module-box-header mb-0">
          Invoice
          <svg
            style="float: right"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
          >
            <path
              d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"
            />
          </svg>
        </h4>

        <div class="col-12" *ngIf="Contractor">
          <div class="m-0 row col-12">
            <div class="col-12 tab-content">
              <ul
                class="p-0 m-0 module-box-header nav nav-tabs"
                id="myreco"
                role="tablist"
              >
                <li class="nav-item" style="margin-left: 2px">
                  <a class="nav-link active" id="doc-tab" data-toggle="tab" (click)="TabSelection(1)" href="#contractor_tab" role="tab" aria-controls="Client" aria-selected="true">Contractor</a>
                </li>
                <li class="nav-item" [hidden]="tabhide">
                  <a class="nav-link" id="log-tab" data-toggle="tab" (click)="TabSelection(2)" href="#clent_tab" role="tab" aria-controls="field" aria-selected="false" >Client</a>
                </li>
                <li class="nav-item" [hidden]="tabhide">
                  <a class="nav-link" id="impo-tab" data-toggle="tab" (click)="TabSelection(3)" href="#expenses_tab" role="tab" aria-controls="field" aria-selected="false" >Expenses</a>
                </li>
              </ul>

              <div class="tab-pane fade" [ngClass]="selectedtab==1?'show active':''" id="contractor_tab" role="tabpanel" aria-labelledby="doc-tab" *ngIf="IsInvoiceDataFetched">
                <div class="module-box table-responsive">
                  <div *ngIf="Contractor" style="width: 100%" class="mt-0">
                    <app-invoice-table
                      #invoiceTableComponent
                      [contrOrclient]="'contractor'"
                      [title]="'Contractor Invoice'"
                      [isContractor]="Contractor"
                      [isContractInValid]="isContractInValid"
                      [isClientInValid]="isClientInValid"
                      [invoiceArray]="ContractorInvoiceArray"
                      [Invoice_ContractorDTOObj]="Invoice_ContractorDTOObj"
                      [TaskList]="TaskList"
                      [ClientResultsInvoiceModelObj]="
                        ClientResultsInvoiceModelObj
                      "
                      (copyItem)="copyItemToClient($event)"
                    >
                    </app-invoice-table>

                    <div class="row mt-n4 pl-2">
                      <div class="col-12 ml-2">
                        <button
                          id="client_viewdetail_1"
                          class="btn btn-primary"
                          [disabled]="statusbutton"
                          (click)="AddClientResultContractorInvoiceAddColl()"
                          style="margin-right: 6px"
                        >
                          <i class="fas fa-plus-circle mr-1"></i>Add
                        </button>
                        <button
                          id="client_viewdetail_1"
                          class="btn btn-primary"
                          style="margin-right: 6px"
                          (click)="ClientResultContractionInvoiceSumbit()"
                          [disabled]="isLoading"
                          [disabled]="statusbutton"
                        >
                          <i
                            class="fa"
                            [ngClass]="{
                              'fa-spin fa-spinner': isLoading,
                              'fa-save': !isLoading
                            }"
                          ></i>
                          {{ button }}
                        </button>

                        <button
                          [hidden]="contprint"
                          id="client_viewdetail_1"
                          class="btn btn-primary"
                          (click)="pdfgenerate()"
                          [disabled]="isLoadingPrint"
                        >
                          <i
                            class="fa"
                            [ngClass]="{
                              'fa-spin fa-spinner': isLoadingPrint,
                              'fa-print': !isLoadingPrint
                            }"
                          ></i>
                          {{ buttonPrint }}
                        </button>
                      </div>
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3" style="text-align: right"></div>
                    </div>

                    <app-invoice-record
                      [title]="'Contractor Payment'"
                      [recordPaymentObj]="contractorPaymentObj"
                      [isContractor]="true"
                      [Invoice_ContractorDTOObj]="Invoice_ContractorDTOObj"
                      [Invoice_ClientDTOObj]="Invoice_ClientDTOObj"
                      (PaymentUpdate)="paymentUpdate()"
                    >
                    </app-invoice-record>
                  </div>
                </div>
              </div>
              <div class="module-box tab-pane fade mr-0 ml-0 module-box" [ngClass]="selectedtab==2?'show active':''" id="clent_tab" role="tabpanel" aria-labelledby="log-tab" [hidden]="tabhide" *ngIf="IsInvoiceDataFetched">
                <div class="module-box table-responsive">
                  <div *ngIf="Contractor" class="p-1 col-md-12">
                    <!-- <div *ngIf='Client ' style="width: 100%;" class="mt-0"> -->
                    <app-invoice-table
                      #invoiceTableComponent
                      [contrOrclient]="'client'"
                      [title]="'Client Invoice'"
                      [isContractor]="false"
                      [invoiceArray]="ClientInvoiceArray"
                      [isClientInValid]="isClientInValid"
                      [Invoice_ClientDTOObj]="Invoice_ClientDTOObj"
                      [TaskList]="TaskList"
                      [ClientResultsInvoiceModelObj]="
                        ClientResultsInvoiceModelObj
                      "
                      (copyItem)="copyItemToContractor($event)"
                    >
                    </app-invoice-table>
                    <div class="mt-n4 ml-n1 row" [hidden]="OfficeResulth">
                      <div class="col-12 ml-2">
                        <button
                          id="client_viewdetail_1"
                          class="btn btn-primary"
                          (click)="
                            AddClientResultContractorInvoiceAddCollClinet()
                          "
                          style="margin-right: 6px"
                        >
                          <i class="fas fa-plus-circle"></i> Add
                        </button>
                        <button
                          id="client_viewdetail_1"
                          style="margin-right: 6px"
                          class="btn btn-primary"
                          (click)="ClientResultClientInvoiceSumbit()"
                          [disabled]="isLoadingc"
                        >
                          <i
                            class="fa"
                            [ngClass]="{
                              'fa-spin fa-spinner': isLoadingc,
                              'fa-save': !isLoadingc
                            }"
                          ></i>
                          {{ buttonc }}
                        </button>
                        <button
                          [hidden]="clientprint"
                          id="client_viewdetail_1"
                          class="btn btn-primary"
                          (click)="Clientpdfgenerate()"
                          [disabled]="isLoadingPrint"
                        >
                          <i
                            class="fa"
                            [ngClass]="{
                              'fa-spin fa-spinner': isLoadingPrint,
                              'fa-print': !isLoadingPrint
                            }"
                          ></i>
                          {{ buttoncPrint }}
                        </button>
                      </div>
                      <div class="col-3"></div>
                      <div class="col-3"></div>
                      <div class="col-3" style="text-align: right"></div>
                    </div>
                    <app-invoice-record
                      [title]="'Client Payment'"
                      [recordPaymentObj]="contractorPaymentObj"
                      [isContractor]="false"
                      [Invoice_ContractorDTOObj]="Invoice_ContractorDTOObj"
                      [Invoice_ClientDTOObj]="Invoice_ClientDTOObj"
                      (PaymentUpdate)="paymentUpdate()"
                    >
                    </app-invoice-record>
                    <!-- </div> -->
                  </div>
                </div>
              </div>
              <div class="module-box tab-pane fade mr-0 ml-0 module-box" [ngClass]="selectedtab==3?'show active':''" id="expenses_tab" role="tabpanel" aria-labelledby="log-tab" [hidden]="tabhide" *ngIf="IsInvoiceDataFetched">
                <div class="module-box table-responsive">
                  <!-- <div class="p-1  col-md-12"> -->
                  <!-- <div *ngIf='Contractor'  class="mt-3 m-0" [hidden]='expences'> -->
                  <div *ngIf="Contractor" class="mt-3 m-0" [hidden]="expences">
                    <div class="row col-12 m-0 pb-2">
                      <div class="module-box p-0 col-md-5 col-12">
                        <h4 class="module-box-header pl-2">Expenses</h4>
                        <table class="expense-table">
                          <div
                            style="
                              max-height: 27vh;
                              overflow-y: auto;
                              box-shadow: 0 0 4px #b6babf;
                            "
                          >
                            <tr>
                              <th style="text-align: center">Expense</th>

                              <th style="text-align: center" width="100px">
                                Total
                              </th>
                              <th style="text-align: center">Notes</th>

                            </tr>
                            <tr *ngFor="let item of expenses; let i = index">
                              <td>
                                <div class="inputWithIcon inputIconBg">
                                <input
                                  type="text"
                                  [(ngModel)]="item.CCE_Pay_Expense_Name"
                                  class="form-control form-control-sm"
                                  [id]="'expense' + i"
                                />
                              </div>
                              </td>
                               <!-- <td><div class="inputWithIcon inputIconBg">
                                 <input type="number"[(ngModel)]="item.CCE_Pay_Amount" [disabled]="true"
                                   class="form-control form-control-sm">
                                   <i class="fa fa-dollar-sign" aria-hidden="true"></i>
                                </div></td> -->

                              <td>
                                <div class="inputWithIcon inputIconBg">
                                <input  type="text" [(ngModel)]="item.CCE_Pay_Amount" class="form-control form-control-sm" (blur)="onBlurMethod()">
                                  <i class="fa fa-dollar-sign" aria-hidden="true"></i>
                                </div>
                              </td>
                              <td>
                                <input
                                  type="text"
                                  [(ngModel)]="item.CCE_Pay_Comment"
                                  class="form-control form-control-sm"
                                />
                              </td>
                              <td
                                style="
                                  text-align: center;
                                  vertical-align: middle;
                                "
                              >
                                <span
                                  ><a
                                    style="cursor: pointer"
                                    (click)="onRemoveExpense(item)"
                                  >
                                    <i class="fa fa-trash"></i
                                  ></a>
                                </span>
                              </td>
                            </tr>
                          </div>
                          <div class="mt-2 pl-2 row">
                            <label class="col-5">Total</label>
                            <label style="margin-left: -3%; text-align: initial"
                              >${{ getExpTotal() }}</label
                            >
                          </div>
                          <tr>
                            <td colspan="4">
                              <div class="mt-1">
                                <button
                                  id="client_viewdetail_1"
                                  class="btn btn-primary"
                                  (click)="addExpense()"
                                  style="margin-right: 6px"
                                >
                                  <i class="fas fa-plus-circle"></i> Add
                                </button>
                                <button
                                  id="client_viewdetail_1"
                                  class="btn btn-primary"
                                  (click)="saveExpense()"
                                  [disabled]="isexpLoading"
                                >
                                  <i
                                    class="fa"
                                    [ngClass]="{
                                      'fa-spin fa-spinner': isexpLoading,
                                      'fa-save': !isexpLoading
                                    }"
                                  ></i>
                                  {{ buttonexp }}
                                </button>
                              </div>
                            </td>
                          </tr>
                        </table>
                      </div>

                      <div class="col-lg-2"></div>
                      <div
                        class="col-lg-5 col-md-5 col-12 p-0 module-box insmall"
                      >
                        <h4 class="module-box-header pl-2">Profit and Loss</h4>
                        <table class="jobPL-table">
                          <tr>
                            <td class="col-form-label">Job Costing</td>
                            <td class="col-form-label"></td>
                          </tr>
                          <tr>
                            <td class="col-form-label">Contractor Invoice</td>
                            <td class="col-form-label">${{ getConInv() }}</td>
                          </tr>
                          <tr>
                            <td class="col-form-label">Expense Total</td>
                            <td class="col-form-label">${{ getExpTotal() }}</td>
                          </tr>
                          <tr>
                            <td class="col-form-label">Total Expenses</td>
                            <td class="col-form-label">${{ getTlExp() }}</td>
                          </tr>
                          <tr>
                            <td class="col-form-label">Client Invoice</td>
                            <td class="col-form-label">${{ getCliInv() }}</td>
                          </tr>
                          <tr>
                            <td class="col-form-label">Balance</td>
                            <td class="col-form-label">${{ getBalance() }}</td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                  <!-- </div> -->
                  <!-- </div> -->
                </div>
              </div>
              <div class="tab-pane fade" [ngClass]="!IsInvoiceDataFetched?'show active':''" id="contractor_tab" role="tabpanel" aria-labelledby="doc-tab" *ngIf="!IsInvoiceDataFetched">
                <div class="module-box table-responsive">
                <div class="loader m-auto">
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
     </div>
  </div>
</div>

<!-- print contractor data -->
<div class="container">
  <app-invoice-print
    id="DivIdToPrint"
    [printDivF]="PrintDivF"
    [isContractor]="true"
    [invoice_DTOObj]="Invoice_ContractorDTOObj"
    [BindDataModelObj]="BindDataModelObj"
    [printArray]="printArray"
  >
  </app-invoice-print>
</div>

<!--print client data -->
<div class="container">
  <app-invoice-print
    id="Divprint"
    [printDivF]="PrintDivcl"
    [isContractor]="false"
    [invoice_DTOObj]="Invoice_ClientDTOObj"
    [BindDataModelObj]="BindDataModelObj"
    [printArray]="clientprintArray"
  >
  </app-invoice-print>
  <ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="default" color="#fff" type="timer" [fullScreen]="true">
    <p style="color: white">Loading...</p>
  </ngx-spinner>
</div>
